functions:
  - has-header
  - param-names
  - param-order
rules:
  jquick-response-headers:
    description: A 202 response should include an Operation-Location response header.
    message: A 202 response should include an Operation-Location response header.
    severity: warn
    formats: ['oas2']
    given: $.paths[*][*].responses[?(@property == '202')]
    then:
      function: has-header
      functionOptions:
        name: Operation-location
  jquick-parameter-names-convention:
    description: Parameter names should conform to Azure naming conventions.
    message: '{{error}}'
    severity: warn
    given:
    - $.paths[*].parameters.*
    - $.paths.*[get,put,post,patch,delete,options,head].parameters.*
    then:
      function: param-names
  jquick-parameter-order:
    description: Path parameters must be in the same order as in the path.
    message: '{{error}}'
    severity: warn
    formats: ['oas2', 'oas3']
    given: $.paths
    then:
      function: param-order
  jquick-success-response-body:
    description: All success responses except 204 should define a response body.
    severity: warn
    formats: ['oas2']
    given: $.paths[*][get,put,post,patch,delete].responses[?(@property >= 200 && @property < 300 && @property != '202' && @property != '204')]
    then:
      field: schema
      function: truthy

